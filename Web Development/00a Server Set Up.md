# How to's

| What to do                                                      | Instructions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| How to install caddy in a Amazon Linux 2023<br><br>server (EC2) | [https://stackoverflow.com/questions/73347341/cannot-download-caddy-package-on-yum/74436450#74436450](https://stackoverflow.com/questions/73347341/cannot-download-caddy-package-on-yum/74436450#74436450)  <br>  <br>Commands (maybe use sudo??)<br><br>`yum -y install yum-plugin-copr`<br><br>`yum -y copr enable @caddy/caddy epel-7-$(arch)`<br><br>`yum -y install caddy`\|<br><br>**Note**: arch needs to be replaced with the actual architecture (just run the command and I will see a list of all the available architectures)`<br><br>I run: `sudo yum -y copr enable @caddy/caddy 'epel-7-x86_64'`                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| how to find caddy file                                          | `/etc/caddy/Caddyfile`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| how to find root for caddy page                                 | `/usr/share/caddy`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `'cd ~'` takes me to ->                                         | `/home/ec2-user`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| caddyFile in startup server                                     | maxiparis.com {root * /usr/share/caddy<br>   file_server<br>   header Cache-Control no-store<br>   header -etag<br>   header -server<br>}<br><br>gatekeeper.maxiparis.com {<br>   reverse_proxy * localhost:4000<br>   header Cache-Control no-store<br>   header -server<br>   header -etag<br>   header Access-Control-Allow-Origin *<br><br>}<br><br>simon.maxiparis.com {<br>   reverse_proxy * localhost:3000<br>   header Cache-Control no-store<br>   header -server<br>   header -etag<br>   header Access-Control-Allow-Origin *<br>}                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `pm2 list`                                                      | This will display a list of all processes managed by PM2, including details like the process ID, name, status (online/offline), memory usage, CPU usage, and uptime.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `how to install Node.js and npm`                                | [https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/setting-up-node-on-ec2-instance.html](https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/setting-up-node-on-ec2-instance.html)  <br>  <br>  <br> <br><br>To set up Node.js on your Linux instance<br><br>1. Connect to your Linux instance as ec2-user using SSH.<br>2. Install node version manager (nvm) by typing the following at the command line.  <br>      <br>    Warning  <br>    AWS does not control the following code. Before you run it, be sure to verify its authenticity and integrity. More information about this code can be found in the [nvm](https://github.com/nvm-sh/nvm/blob/master/README.md) GitHub repository.curl -o- [https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh](https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh) \\ | bashWe will use nvm to install Node.js because nvm can install multiple versions of Node.js and allow you to switch between them.<br>3. Load nvm by typing the following at the command line.source ~/.bashrc<br>4. Use nvm to install the latest LTS version of Node.js by typing the following at the command line.  <br>      <br>      <br>    nvm install --lts  <br>    Installing Node.js also installs the Node Package Manager (npm), so you can install additional modules as needed.<br>5. Test that Node.js is installed and running correctly by typing the following at the command line.  <br>      <br>      <br>    node -e "console.log('Running Node.js ' + process.version)"  <br>    This displays the following message that shows the version of Node.js that is running.  <br>    Running Node.js VERSION\| |
| `pm2 show [id]`                                                 | to see info on the services running                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `pm2 env [id]`                                                  | to see the env variables for a specific instance                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| how to start the pm2 app                                        | pm2 start npm --name "[NAME WE WANT]" -- run dev                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| how to check ports                                              | sudo netstat -tuln                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

# How to build the app:

| How to                                                                               | Notes                    |
| ------------------------------------------------------------------------------------ | ------------------------ |
| `sudo chown -R ec2-user:ec2-user /home/ec2-user/public_html/focusflow-website/dist/` | to give access to myself |
| `npm run build`                                                                      |                          |
| `pm2 start npm --name "app" -- run preview`                                          |                          |

---

# Things I learned after

---

|                 |      |
| --------------- | ---- |
| process         | port |
| npm run dev     | 5173 |
| npm run preview | 4173 |

-----------------

# Things to install in Amazon Linux 2023 instance: created with AWS EC2

- `caddy` - for https management and reverse proxy (serve other services in the same server via ports - ex: the back end of a service could be in the port 3000 and the front end in 2000)
- `Node.js` and `npm` (to run and install dependencies in the web server)
- `git`
- `pm2` - to manage the services running in the background